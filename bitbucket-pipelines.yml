image: golang:latest
pipelines:
  default:
    - step:
        script:
          - mkdir -p "$GOPATH/src/github.com/jitsi"
          - ln -s "`pwd`" "$GOPATH/src/github.com/jitsi/jwtsi"
          - go-wrapper download
          - go version
    - step:
        script:
          - cd "$GOPATH/src/github.com/jitsi/jwtsi"
          - go build -race
          - go vet
          - go test -cover
    - step:
        script:
          - cd "$GOPATH/src/github.com/jitsi/jwtsi/jwtsi"
          - go build -race
          - go vet
          - go test -cover
